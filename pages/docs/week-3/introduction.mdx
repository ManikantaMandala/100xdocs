# Middlewares, Zod Validations

# Express Middlewares

- Middlewares are functions that execute during the lifecycle of a request to the Express server.

```js
const express = require("express");

const app = express();

// global middleware
app.use((req, res, next) => {
  console.log("In the middleware!");
  next();
});
```

- The `app.use()` method is used to register a middleware.
- A good use case of a middleware is to check if the user is authenticated. If the user is authenticated, the request should be allowed to proceed. If the user is not authenticated, the request should be rejected.
- Another use case can be rate limiting. If a user is making too many requests to the server, the request should be rejected.

```js
const express = require("express");
const app = express();

const username = req.query.username;
const password = req.query.password;

app.get("/login", (req, res, next) => {
  // username and password checks
  if (req.query.username != username && req.query.password != password) {
    res.status(403).json({
      message: "Invalid credentials!",
    }).
  }
  return;
});
```
